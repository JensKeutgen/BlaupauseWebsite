<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mathe Memory Spiel</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/memory/memory.css">
    <link rel="stylesheet" href="../css/themes/aufgaben-theme.css">
</head>
<body>
    <header></header>

    <main class="container aufgaben-container">
        <h1>Mathe Memory</h1>

        <section class="game-info">
            <p>Züge: <span id="moves-counter">0</span></p>
            <p>Gefundene Paare: <span id="matched-pairs-info">0</span></p>
        </section>

        <div id="memory-board" class="memory-board">
            <!-- Cards will be generated by memory.js -->
        </div>

        <div id="win-message" class="win-message" style="display: none;">
            Glückwunsch! Du hast das Spiel gewonnen!
        </div>
    </main>

    <footer></footer>

    <script src="../js/memory.js"></script>
    <script src="../js/main.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const mathProblems = [
                { id: 1, problem: "2 + 2", solution: "4" },
                { id: 2, problem: "5 x 3", solution: "15" },
                { id: 3, problem: "10 / 2", solution: "5" },
                { id: 4, problem: "sqrt(9)", solution: "3" },
                { id: 5, problem: "7 - 4", solution: "3" }, // Note: Solution '3' is repeated, ensure matching logic handles this by ID.
                { id: 6, problem: "3 * 6", solution: "18" },
                { id: 7, problem: "16 / 4", solution: "4" }, // Note: Solution '4' is repeated.
                { id: 8, problem: "2^3", solution: "8" }
            ];

            const gameItems = [];
            mathProblems.forEach(p => {
                // Each item for createMemoryGame should have a displayValue and a matchId
                // The 'value' attribute used in memory.js's dataset.value will be the matchId
                gameItems.push({ displayValue: p.problem, matchId: p.id, type: 'problem' });
                gameItems.push({ displayValue: p.solution, matchId: p.id, type: 'solution' });
            });

            const gameBoardElement = document.getElementById('memory-board');
            const movesCounterElement = document.getElementById('moves-counter');
            const matchedPairsInfoElement = document.getElementById('matched-pairs-info');
            const winMessageElement = document.getElementById('win-message');

            // Call createMemoryGame with the new parameters.
            // memory.js needs to be updated to accept gameItems with {displayValue, matchId, type}
            // and the UI elements for updating moves, matched pairs, and showing the win message.
            // For now, the old createMemoryGame might not work as expected or throw errors.
            if (gameBoardElement && typeof createMemoryGame === 'function') {
                 // createMemoryGame(gameBoardElement, gameItems, movesCounterElement, matchedPairsInfoElement, winMessageElement);
                 // The above line is commented out because memory.js is not yet updated.
                 // For now, we'll call it with the understanding it might need adjustment.
                 // The current memory.js expects a flat array of values to be duplicated.
                 // We will need to modify memory.js to handle the gameItems structure.

                 // Temporary adaptation for the current memory.js, which expects simple values:
                 // This will be replaced once memory.js is updated.
                 const simplifiedItems = gameItems.map(item => `${item.displayValue} (ID: ${item.matchId})`);
                 // createMemoryGame(gameBoardElement, simplifiedItems);
                 // The above line is also a temporary measure. The actual fix is to update memory.js.

                 console.log("Mathe-Memory HTML setup complete. Ensure memory.js is updated to handle the new gameItems structure and UI elements.");
                 console.log("To initialize the game correctly, uncomment and adapt the createMemoryGame call after updating memory.js.");
                 // For now, to avoid errors and to allow page to load, we are not calling createMemoryGame
                 // or calling it with a placeholder if it's robust enough.
                 // The subtask is to create the HTML, which is done.
                 // The next subtask will be to update memory.js.
            } else {
                console.error("Failed to find game board element or createMemoryGame function.");
            }
        });
    </script>
</body>
</html>
